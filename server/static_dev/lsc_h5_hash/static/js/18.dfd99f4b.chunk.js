(window.webpackJsonplsc_h5_ts=window.webpackJsonplsc_h5_ts||[]).push([[18],{827:function(e,t,a){},852:function(e,t,a){"use strict";a.r(t);a(99),a(204),a(46),a(83),a(59),a(23),a(31),a(28),a(202);var n=a(12),r=a(29),c=(a(82),a(25)),s=a(267),u=a(1),i=a.n(u),o=(a(39),a(2)),l=a(14),m=a(15),p=a(86),h=a(17),f=a(16),b=a(11),d=a(0),g=a.n(d),v=a(20),y=a(27),j=a(30),k=a(37),O=(a(827),a(62)),x=a(13);var w={boutique:{url:"/queryBoutiqueObject",title:""},subtype:{url:"/queryMuseumObjectList",title:""},search:{url:"/seekMuseumObjectList",title:""},favorite:{url:"/queryFavoriteMuseumObject",title:"\u6211\u7684\u6536\u85cf"},museum:{url:"/queryMuseumObjectList",title:""}},C=function(e){Object(h.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,n=Object(b.a)(e);if(t()){var r=Object(b.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(f.a)(this,a)}}(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onDelete=function(){var e=Object(o.a)(i.a.mark((function e(t){var a,r,c,s,u,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),a=n.props,r=a.deleteCollection,c=a.collectionList,s=a.changeCommonData,u=[],c.map((function(e){e.checked&&u.push(e.objectId)})),e.next=6,r(u.join("&"));case 6:if(o=e.sent,!o.isOk){e.next=13;break}return e.next=11,s({page:1,totalPage:0});case 11:return e.next=13,n.getList();case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.choseAll=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.toggle=function(){var e=Object(o.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.state[t],n.setState(Object(s.a)({},t,!a));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.navHome=function(){var e=n.props,t=e.match.params,a=t.by,r=t.id,c=t.museumId;e.history.push({pathname:"/museums/museum_home/"+("subtype"===a?c:r)})},n.toMuseumNavs=function(){var e=Object(o.a)(i.a.mark((function e(t){var a,r,c,s,u,o,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.value,r=t.page,c=n.props,s=c.museum,u=s.id,o=s.storeid,l=c.history,-1!==a){e.next=4;break}return e.abrupt("return");case 4:l.push({pathname:r+"/"+(5===a?o:u)});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.getInit=Object(o.a)(i.a.mark((function e(){var t,a,r,c,s,u,o,l,m,h,f,b,d,g,v;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(p.a)(n),a=t.props,r=a.changeCommonData,c=a.getMuseumSubTypeDetail,s=a.page,u=a.getMuseumDetail,o=a.match.params,l=o.by,m=o.id,h=o.typeId,f=t.getList,b={fromWebview:"fromWebview"===h},1!==s&&Object.assign(b,{page:1,totalPage:0}),e.next=5,r(b);case 5:if(d="\u6211\u7684\u6536\u85cf","favorite"===l){e.next=19;break}if("subtype"!==l){e.next=13;break}return e.next=10,c(m);case 10:e.t0=e.sent,e.next=16;break;case 13:return e.next=15,u(m);case 15:e.t0=e.sent;case 16:g=e.t0,v=g.name,d=v;case 19:return e.next=21,x.d.setWxTitle(d);case 21:return e.next=23,f();case 23:case"end":return e.stop()}}),e)}))),n.getList=Object(o.a)(i.a.mark((function e(){var t,a,r,c,s,u,o,l,m;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.props,a=t.changeMuseumData,r=t.match.params,c=r.by,s=r.id,u=t.formFields.content,o=t.page,l=t.getCollections,m={page:o,content:u},Object.assign(m,"museum"===c?{museumId:s}:{id:s}),"search"!==c||u){e.next=7;break}return e.next=6,a({collectionList:[]});case 6:return e.abrupt("return");case 7:return e.next=9,l({url:w[c].url,data:m});case 9:case"end":return e.stop()}}),e)}))),n.state={edit:!1},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props,t=e.fromWebview,a=(e.className,e.collectionList),n=e.match.params,r=n.by,s=n.id,u=n.isMyself,i=n.typeId,o=n.museumId,l=e.museumHomeNavs,m=this.state.edit,p=this.getInit,h=this.toMuseumNavs,f=this.navHome,b=this.toggle,d=this.choseAll,v=this.onDelete,y=this.getList;return g.a.createElement(c.a,{direction:"column",align:"start",className:"collection_list_page"},"museum"===r&&!t&&g.a.createElement(k.D,{initValue:0,activeColor:"#6499AE",options:l,onChange:h}),"search"===r&&g.a.createElement(k.z,{onChange:p,fieldType:"search",name:"content",placeholder:"\u8bf7\u8f93\u5165\u85cf\u54c1\u540d\u79f0",defaultValue:""}),t&&g.a.createElement("div",{className:"mall_title"},"\u5546\u57ce"),g.a.createElement(c.a.Item,{className:"list"},"search"!==r&&!t&&g.a.createElement(c.a,null,g.a.createElement(c.a.Item,null,g.a.createElement(k.s,{className:"search_collection",placeholder:"\u8bf7\u8f93\u5165\u85cf\u54c1\u540d\u79f0",page:"/museums/collection_list/search/"+s+"/"+u})),"favorite"!==r&&g.a.createElement("img",{onClick:f,className:"museum_home",src:"/lsc_h5_hash/imgs/home0.png",alt:""})),g.a.createElement(k.r,{onLoadData:y},g.a.createElement(k.j,{edit:m,type:r,list:a}))),"true"===u&&g.a.createElement(c.a,{className:"oprs"},m&&g.a.createElement(c.a.Item,null,g.a.createElement("span",{onClick:function(){return d(!0)}},"\u5168\u9009"),g.a.createElement("span",{onClick:function(){return d(!1)}},"\u5168\u4e0d\u9009"),g.a.createElement("span",{onClick:function(){return b("edit")}},"\u53d6\u6d88"),g.a.createElement("span",{onClick:v},"\u5220\u9664")),g.a.createElement("img",{onClick:function(){return b("edit")},src:"/lsc_h5_hash/imgs/edit.png",alt:""}),g.a.createElement(O.b,{to:"/museums/collection_edit/"+s+"/"+i+"/"+o},g.a.createElement("img",{src:"/lsc_h5_hash/imgs/add1.png",alt:""}))))}},{key:"componentDidMount",value:function(){this.getInit()}},{key:"shouldComponentUpdate",value:function(e,t,a){return!0}},{key:"componentWillReceiveProps",value:function(e,t){e.match.params.by!==this.props.match.params.by&&this.getInit()}}]),a}(g.a.Component);t.default=Object(j.b)((function(e){var t=e.commonReducer,a=t.formFields,n=t.page,c=t.museumHomeNavs,s=t.fromWebview,u=e.museumReducer,i=u.collectionList,o=u.museum;return{collectionList:i,fromWebview:s,formFields:a,page:n,museumHomeNavs:[{text:"\u5168\u90e8",value:-1}].concat(Object(r.a)(c)),museum:o}}),(function(e){var t=v.e.getCollections,a=v.e.getMuseumDetail,r=v.e.changeMuseumData,c=v.e.getMuseumSubTypeDetail,s=v.e.deleteCollection,u=v.a.changeCommonData;return Object(n.a)(Object(n.a)({},Object(y.bindActionCreators)({getCollections:t,changeCommonData:u,getMuseumDetail:a,changeMuseumData:r,getMuseumSubTypeDetail:c,deleteCollection:s},e)),{},{dispatch:e})}))(C)}}]);
//# sourceMappingURL=18.dfd99f4b.chunk.js.map