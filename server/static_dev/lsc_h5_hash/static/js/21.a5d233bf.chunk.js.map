{"version":3,"sources":["pages/museums/museum_home/index.tsx"],"names":["MuseumHome","props","navTo","value","page","history","museum","id","storeid","isMyself","state","pathname","push","getInit","a","match","params","getMuseumDetail","getMyMuseums","myMuseums","document","title","name","length","list","index","findIndex","e","museumId","setState","this","museumHomeNavs","className","map","i","key","onClick","src","alt","text","nextProps","nextState","nextContext","React","Component","connect","commonReducer","museumReducer","dispatch","museumActions","commonActions","bindActionCreators"],"mappings":"4VAyBMA,E,keAEF,WAAYC,GAAa,IAAD,8BACpB,cAAMA,IA8BVC,MAAQ,YAAyB,IAAvBC,EAAsB,EAAtBA,MAAOC,EAAe,EAAfA,KAAe,qBAExBH,MAAQI,EAFgB,EAEhBA,QAFgB,IAEPC,OAASC,EAFF,EAEEA,GAAIC,EAFN,EAEMA,QACtBC,EAHgB,EAGxBC,MAAQD,SAERE,EAAWP,EAAO,KAAiB,IAAVD,EAAcK,EAAUD,GACrDI,GAAY,KAAiB,IAAVR,GAAyB,IAAVA,GAAwB,IAAVA,EAAcM,EAAW,IACzEJ,EAAQO,KAAK,CAACD,cAtCM,EAwCxBE,QAxCwB,sBAwCd,4CAAAC,EAAA,+DACkE,EAAKb,MAAvDM,EADhB,EACDQ,MAAQC,OAAST,GAAMU,EADtB,EACsBA,gBAAiBC,EADvC,EACuCA,aAAcC,EADrD,EACqDA,UADrD,SAEeF,EAAgBV,GAF/B,UAEAD,EAFA,OAGNc,SAASC,MAAQf,EAAOgB,KACnBH,EAAUI,OAJT,iCAKmBL,IALnB,gBAKKM,EALL,EAKKA,KACPL,EAAYK,EANV,QAQAC,EAAQN,EAAUO,WAAU,SAACC,GAAD,OAAYA,EAAEC,WAAarB,KAC7D,EAAKsB,SAAS,CAACpB,UAAqB,IAAXgB,IATnB,4CArCN,EAAKf,MAAQ,CACTD,UAAU,GAJM,E,qDAQqJ,IAAD,EAQpKqB,KANA7B,MAEI8B,GAJgK,EAGhKC,UAHgK,EAIhKD,gBAEItB,EAERqB,KAFApB,MAAQD,SACRP,EACA4B,KADA5B,MAEJ,OACI,yBAAK8B,UAAS,oBAEND,EAAeE,KAAI,SAACN,EAAQO,GAAT,OAAuB,yBAAKC,IAAKD,EAAGF,UAAW,MACnBI,QAAS,kBAAMlC,EAAMyB,KAChE,yBAAKU,IAAK,iCAAmCV,EAAExB,MAAQ,OAAQmC,IAAI,KACnE,yBAAKN,UAAW,QAASL,EAAEY,KAAY,IAANL,GAAWzB,EAAW,6BAAW,QAG1E,kBAAC,IAAD,S,0CA2BRqB,KAAKjB,Y,4CAGa2B,EAA0BC,EAA0BC,GACtE,OAAO,M,GA3DUC,IAAMC,WAgFhBC,uBAjBf,SAAyBnC,GAAiB,IAAD,EACDA,EAAMoC,cAAnCf,EAD8B,EAC9BA,eAAgBZ,EADc,EACdA,UAChBb,EAAUI,EAAMqC,cAAhBzC,OACP,MAAO,CACHyB,eAAe,CAAC,CAACQ,KAAK,eAAKpC,MAAM,EAAEC,KAAK,oCAA1B,mBAAgE2B,IAAiBzB,SAAQa,gBAI/G,SAA4B6B,GAAgB,IACjC/B,EAAmBgC,IAAnBhC,gBACAC,EAAgBgC,IAAhBhC,aACP,OAAO,2BACAiC,6BAAmB,CAAClC,kBAAiBC,gBAAe8B,IAD3D,IAEIA,eAIOH,CAGb7C","file":"static/js/21.a5d233bf.chunk.js","sourcesContent":["import React from 'react'\r\nimport {entries} from \"reducer\";\r\nimport {museumActions, commonActions} from \"action\";\r\nimport {bindActionCreators} from \"redux\";\r\nimport {connect} from \"react-redux\";\r\n\r\nimport './index.scss'\r\nimport {BackHome} from \"../../../components\";\r\n\r\ninterface P {\r\n    className?: string,\r\n    match: any,\r\n    history: any,\r\n    getMuseumDetail: any,\r\n    getMyMuseums: any,\r\n    myMuseums: any[],\r\n    museumHomeNavs: any[],\r\n    museum: any\r\n}\r\n\r\ninterface S {\r\n    isMyself: boolean\r\n}\r\n\r\n\r\nclass MuseumHome extends React.Component<P, S> {\r\n    // 构造\r\n    constructor(props: any) {\r\n        super(props);\r\n        // 初始状态\r\n        this.state = {\r\n            isMyself: false\r\n        };\r\n    }\r\n\r\n    render(): React.ReactElement<any, string | React.JSXElementConstructor<any>> | string | number | {} | React.ReactNodeArray | React.ReactPortal | boolean | null | undefined {\r\n        const {\r\n            props: {\r\n                className = '',\r\n                museumHomeNavs\r\n            },\r\n            state: {isMyself},\r\n            navTo\r\n        } = this\r\n        return (\r\n            <div className={`museum_home_page`}>\r\n                {\r\n                    museumHomeNavs.map((e: any, i: number) => <div key={i} className={'nav'}\r\n                                                                   onClick={() => navTo(e)}>\r\n                        <img src={\"/lsc_h5_hash/imgs/museum_home_\" + e.value + '.png'} alt=\"\" />\r\n                        <div className={'text'}>{e.text}{i === 2 && isMyself ? '(类目编辑)' : ''}</div>\r\n                    </div>)\r\n                }\r\n                <BackHome />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    navTo = ({value, page}: any) => {\r\n        const {\r\n            props: {history, museum: {id, storeid}},\r\n            state: {isMyself}\r\n        } = this\r\n        let pathname = page + '/' + (value === 5 ? storeid : id)\r\n        pathname += '/' + (value === 1 || value === 2|| value === 8 ? isMyself : '')\r\n        history.push({pathname})\r\n    }\r\n    getInit = async () => {\r\n        let {match: {params: {id}}, getMuseumDetail, getMyMuseums, myMuseums} = this.props\r\n        const museum = await getMuseumDetail(id)\r\n        document.title = museum.name\r\n        if (!myMuseums.length) {\r\n            const {list} = await getMyMuseums()\r\n            myMuseums = list\r\n        }\r\n        const index = myMuseums.findIndex((e: any) => e.museumId === id)\r\n        this.setState({isMyself: index !== -1})\r\n    }\r\n\r\n    componentDidMount(): void {\r\n        this.getInit()\r\n    }\r\n\r\n    shouldComponentUpdate(nextProps: Readonly<any>, nextState: Readonly<any>, nextContext: any): boolean {\r\n        return true\r\n    }\r\n}\r\n\r\nfunction mapStateToProps(state: entries) {\r\n    const {museumHomeNavs, myMuseums} = state.commonReducer\r\n    const {museum} = state.museumReducer\r\n    return {\r\n        museumHomeNavs:[{text:'全部',value:8,page:'/museums/collection_list/museum'},...museumHomeNavs], museum, myMuseums\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: any) {\r\n    const {getMuseumDetail} = museumActions\r\n    const {getMyMuseums} = commonActions\r\n    return {\r\n        ...bindActionCreators({getMuseumDetail, getMyMuseums}, dispatch),\r\n        dispatch\r\n    };\r\n}\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(MuseumHome)\r\n"],"sourceRoot":""}