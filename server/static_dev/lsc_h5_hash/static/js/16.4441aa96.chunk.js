(window.webpackJsonplsc_h5_ts=window.webpackJsonplsc_h5_ts||[]).push([[16],{829:function(e,t,n){},854:function(e,t,n){"use strict";n.r(t);n(203),n(83),n(23),n(31),n(28),n(202),n(82);var a=n(25),o=n(1),c=n.n(o),i=n(12),r=(n(39),n(2)),s=n(14),l=n(15),m=n(86),u=n(17),p=n(16),d=n(11),f=n(0),g=n.n(f),h=n(27),v=n(30),C=n(20),b=n(62),E=n(37);n(829);var k=function(e){Object(u.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,a=Object(d.a)(e);if(t()){var o=Object(d.a)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(p.a)(this,n)}}(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).onComment=Object(r.a)(c.a.mark((function e(){var t,n,o,r,s,l,m,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.commentCollection,o=t.formFields,r=t.getCollectionComments,s=t.changeCommonData,l=t.toggleModal,m=t.collection.id,e.next=3,n({id:m,content:o.content});case 3:if(u=e.sent,!u.isOk){e.next=13;break}return e.next=8,l();case 8:return o.content="",e.next=11,s({formFields:Object(i.a)({},o)});case 11:return e.next=13,r({id:m,page:1});case 13:case"end":return e.stop()}}),e)}))),a.onSetBoutique=Object(r.a)(c.a.mark((function e(){var t,n,o,i,r,s,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.setBoutique,o=t.getCollectionDetail,i=t.collection,r=i.id,s=i.isBoutique,e.next=3,n({id:r,status:parseInt(s)});case 3:if(l=e.sent,!l.isOk){e.next=8;break}return e.next=8,o(r);case 8:case"end":return e.stop()}}),e)}))),a.onPraise=Object(r.a)(c.a.mark((function e(){var t,n,o,i,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.praiseCollection,o=t.getCollectionDetail,i=t.collection.id,e.next=3,n(i);case 3:if(r=e.sent,!r.isOk){e.next=8;break}return e.next=8,o(i);case 8:case"end":return e.stop()}}),e)}))),a.onAttention=Object(r.a)(c.a.mark((function e(){var t,n,o,i,r,s,l,m;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.attentionMuseum,o=t.getCollectionDetail,i=t.collection,r=i.museumId,s=i.isAttention,l=i.id,e.next=3,n({id:r,isAttention:"0"===s?1:0});case 3:if(m=e.sent,!m.isOk){e.next=8;break}return e.next=8,o(l);case 8:case"end":return e.stop()}}),e)}))),a.onFavorite=Object(r.a)(c.a.mark((function e(){var t,n,o,i,r,s,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.favoriteCollection,o=t.getCollectionDetail,i=t.collection,r=i.id,s=i.isFavorite,e.next=3,n({id:r,status:parseInt(s)});case 3:if(l=e.sent,!l.isOk){e.next=8;break}return e.next=8,o(r);case 8:case"end":return e.stop()}}),e)}))),a.getInit=Object(r.a)(c.a.mark((function e(){var t,n,o,r,s,l,m,u,p,d,f,g,h;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.match.params,o=n.id,r=n.fromWebview,s=t.formFields,l=t.changeCommonData,m=t.getCollectionDetail,u=t.getCollectionComments,p=t.myMuseums,d=p.findIndex((function(e){return e.museumId===h})),a.setState({isMySelf:-1!==d,fromWebview:"true"===r}),e.next=5,m(o);case 5:return f=e.sent,g=f.name,h=f.museumId,document.title=g,e.next=11,u({id:o,page:1});case 11:return s.content="",e.next=14,l({formFields:Object(i.a)({},s)});case 14:case"end":return e.stop()}}),e)}))),a.gotoBuy=Object(r.a)(c.a.mark((function e(){var t,n,o,i,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=navigator.userAgent,n=Object(m.a)(a),o=n.props.collection,i=o.id,r=o.taobaoUrl;try{/android/i.test(t)&&window.Android.h5GotoMall(i,r),/(iPhone|iPad|iPod|iOS)/i.test(t)&&window.webkit.messageHandlers.h5GotoMall.postMessage(i,r)}catch(c){console.log(c)}case 3:case"end":return e.stop()}}),e)}))),a.goBack=function(){a.props.history.goBack()},a.state={isMySelf:!1,fromWebview:!1},a}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=(e.className,e.collection),n=e.collectionComments,o=e.toggleModal,c=this.state,i=c.isMySelf,r=c.fromWebview,s=this.onAttention,l=this.onFavorite,m=this.onPraise,u=this.onSetBoutique,p=this.onComment,d=this.gotoBuy,f=this.goBack;return g.a.createElement(a.a,{className:"collection_detail_page",direction:"column"},r&&g.a.createElement("div",{className:"mall_title"},g.a.createElement("img",{onClick:f,src:"/lsc_h5_hash/imgs/goback4.png",alt:""}),g.a.createElement("span",null,t.name)),g.a.createElement(a.a.Item,null,g.a.createElement(E.r,null,g.a.createElement(E.y,{fixHeight:!0,options:t.objectPriImg}),g.a.createElement("div",{className:"item base_infos"},g.a.createElement("div",{className:"name"},t.name),g.a.createElement("div",{className:"museum_name"},!!t.museumLogo&&g.a.createElement("img",{src:t.museumLogo.medium,alt:""}),t.museumName),!r&&g.a.createElement(a.a,{className:"actions"},g.a.createElement("div",{onClick:m,className:"0"===t.isPraise?"active":""},g.a.createElement("img",{src:"/lsc_h5_hash/imgs/like_"+("0"===t.isPraise?2:3)+".png",alt:""}),g.a.createElement("span",null,t.praiseNum)),g.a.createElement("div",{onClick:s},"0"===t.isAttention?"\u5df2":"","\u5173\u6ce8"),g.a.createElement("div",{onClick:l},"0"===t.isFavorite?"\u5df2":"","\u6536\u85cf"),g.a.createElement("div",null,"\u5ba2\u670d")),g.a.createElement("div",{className:"describe"},t.describe)),g.a.createElement(E.g,{collection:t}),!r&&g.a.createElement("div",{className:"item comments"},g.a.createElement(E.k,{theme:"museum",params:[t.id]}),g.a.createElement(E.f,{list:n})))),g.a.createElement(a.a,{className:"oprs ".concat(r?"":"state7"),justify:r?"center":"end"},i&&g.a.createElement(b.b,{className:"opr",to:"/museums/collection_edit/"+t.id+"/edit"},g.a.createElement("img",{src:"/lsc_h5_hash/imgs/edit3.png",alt:""}),g.a.createElement("span",null,"\u7f16\u8f91")),i&&g.a.createElement("div",{className:"opr",onClick:u},g.a.createElement("img",{src:"/lsc_h5_hash/imgs/boutique.png",alt:""}),g.a.createElement("span",null,"1"===t.isBoutique?"\u8bbe\u4e3a":"\u53d6\u6d88","\u7cbe\u54c1")),r?g.a.createElement(a.a.Item,{onClick:d,className:"goto_buy"},"\u53bb\u8d2d\u4e70"):g.a.createElement("div",{className:"opr",onClick:o},g.a.createElement("img",{src:"/lsc_h5_hash/imgs/comment1.png",alt:""}),g.a.createElement("span",null,"\u70b9\u8bc4"))),g.a.createElement(E.A,{className:"collection_comment",props:{popup:!0,animationType:"slide-up",title:"\u85cf\u54c1\u8bc4\u8bba"}},g.a.createElement(E.z,{name:"content",fieldType:"textarea"}),g.a.createElement(a.a,{justify:"end"},g.a.createElement("span",{onClick:p,className:"state2"},"\u8bc4\u8bba"))),!r&&g.a.createElement(E.d,{hasBottom:!0,data:{museumId:t.museumId}}))}},{key:"componentDidMount",value:function(){this.getInit()}},{key:"shouldComponentUpdate",value:function(e,t,n){return!0}}]),n}(g.a.Component);t.default=Object(v.b)((function(e){var t=e.museumReducer,n=t.collection,a=t.collectionComments,o=e.commonReducer;return{collection:n,myMuseums:o.myMuseums,formFields:o.formFields,collectionComments:a}}),(function(e){var t=C.a.toggleModal,n=C.a.changeCommonData,a=C.e.getCollectionDetail,o=C.e.getCollectionComments,c=C.e.commentCollection,r=C.e.praiseCollection,s=C.e.attentionMuseum,l=C.e.favoriteCollection,m=C.e.setBoutique;return Object(i.a)(Object(i.a)({},Object(h.bindActionCreators)({getCollectionDetail:a,getCollectionComments:o,praiseCollection:r,attentionMuseum:s,favoriteCollection:l,setBoutique:m,toggleModal:t,commentCollection:c,changeCommonData:n},e)),{},{dispatch:e})}))(k)}}]);
//# sourceMappingURL=16.4441aa96.chunk.js.map