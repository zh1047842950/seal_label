(window.webpackJsonplsc_h5_ts=window.webpackJsonplsc_h5_ts||[]).push([[18],{823:function(e,t,a){},848:function(e,t,a){"use strict";a.r(t);a(99),a(200),a(46),a(83),a(59),a(23),a(30),a(28),a(198);var n=a(12),r=a(29),c=(a(82),a(25)),s=a(264),u=a(1),o=a.n(u),i=(a(39),a(2)),l=a(14),m=a(15),p=a(86),h=a(17),f=a(16),d=a(11),g=a(0),b=a.n(g),v=a(20),y=a(27),j=a(32),k=a(37),x=(a(823),a(62)),O=a(13);var C={boutique:{url:"/queryBoutiqueObject",title:""},subtype:{url:"/queryMuseumObjectList",title:""},search:{url:"/seekMuseumObjectList",title:""},favorite:{url:"/queryFavoriteMuseumObject",title:"\u6211\u7684\u6536\u85cf"},museum:{url:"/queryMuseumObjectList",title:""}},D=function(e){Object(h.a)(a,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var a,n=Object(d.a)(e);if(t()){var r=Object(d.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(f.a)(this,a)}}(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onDelete=function(){var e=Object(i.a)(o.a.mark((function e(t){var a,r,c,s,u,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stopPropagation(),a=n.props,r=a.deleteCollection,c=a.collectionList,s=a.changeCommonData,u=[],c.map((function(e){e.checked&&u.push(e.objectId)})),e.next=6,r(u.join("&"));case 6:if(i=e.sent,!i.isOk){e.next=13;break}return e.next=11,s({page:1,totalPage:0});case 11:return e.next=13,n.getList();case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.choseAll=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.toggle=function(){var e=Object(i.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.state[t],n.setState(Object(s.a)({},t,!a));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.navHome=function(){var e=n.props,t=e.match.params,a=t.by,r=t.id,c=t.museumId;e.history.push({pathname:"/museums/museum_home/"+("subtype"===a?c:r)})},n.toMuseumNavs=function(){var e=Object(i.a)(o.a.mark((function e(t){var a,r,c,s,u,i,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.value,r=t.page,c=n.props,s=c.museum,u=s.id,i=s.storeid,l=c.history,-1!==a){e.next=4;break}return e.abrupt("return");case 4:l.push({pathname:r+"/"+(5===a?i:u)});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.getInit=Object(i.a)(o.a.mark((function e(){var t,a,r,c,s,u,i,l,m,h,f,d,g;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Object(p.a)(n),a=t.props,r=a.changeCommonData,c=a.getMuseumSubTypeDetail,s=a.page,u=a.getMuseumDetail,i=a.match.params,l=i.by,m=i.id,h=t.getList,1===s){e.next=4;break}return e.next=4,r({page:1,totalPage:0});case 4:if(f="\u6211\u7684\u6536\u85cf","favorite"===l){e.next=18;break}if("subtype"!==l){e.next=12;break}return e.next=9,c(m);case 9:e.t0=e.sent,e.next=15;break;case 12:return e.next=14,u(m);case 14:e.t0=e.sent;case 15:d=e.t0,g=d.name,f=g;case 18:return e.next=20,O.d.setWxTitle(f);case 20:return e.next=22,h();case 22:case"end":return e.stop()}}),e)}))),n.getList=Object(i.a)(o.a.mark((function e(){var t,a,r,c,s,u,i,l,m;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.props,a=t.changeMuseumData,r=t.match.params,c=r.by,s=r.id,u=t.formFields.content,i=t.page,l=t.getCollections,m={page:i,content:u},Object.assign(m,"museum"===c?{museumId:s}:{id:s}),"search"!==c||u){e.next=7;break}return e.next=6,a({collectionList:[]});case 6:return e.abrupt("return");case 7:return e.next=9,l({url:C[c].url,data:m});case 9:case"end":return e.stop()}}),e)}))),n.state={edit:!1},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props,t=(e.className,e.collectionList),a=e.match.params,n=a.by,r=a.id,s=a.isMyself,u=a.typeId,o=a.museumId,i=e.museumHomeNavs,l=this.state.edit,m=this.getInit,p=this.toMuseumNavs,h=this.navHome,f=this.toggle,d=this.choseAll,g=this.onDelete,v=this.getList;return b.a.createElement(c.a,{direction:"column",align:"start",className:"collection_list_page"},"museum"===n&&b.a.createElement(k.D,{initValue:0,activeColor:"#6499AE",options:i,onChange:p}),"search"===n&&b.a.createElement(k.z,{onChange:m,fieldType:"search",name:"content",placeholder:"\u8bf7\u8f93\u5165\u85cf\u54c1\u540d\u79f0",defaultValue:""}),b.a.createElement(c.a.Item,{className:"list"},"search"!==n&&b.a.createElement(c.a,null,b.a.createElement(c.a.Item,null,b.a.createElement(k.s,{className:"search_collection",placeholder:"\u8bf7\u8f93\u5165\u85cf\u54c1\u540d\u79f0",page:"/museums/collection_list/search/"+r+"/"+s})),"favorite"!==n&&b.a.createElement("img",{onClick:h,className:"museum_home",src:"/lsc_h5/imgs/home0.png",alt:""})),b.a.createElement(k.r,{onLoadData:v},b.a.createElement(k.j,{edit:l,type:n,list:t}))),"true"===s&&b.a.createElement(c.a,{className:"oprs"},l&&b.a.createElement(c.a.Item,null,b.a.createElement("span",{onClick:function(){return d(!0)}},"\u5168\u9009"),b.a.createElement("span",{onClick:function(){return d(!1)}},"\u5168\u4e0d\u9009"),b.a.createElement("span",{onClick:function(){return f("edit")}},"\u53d6\u6d88"),b.a.createElement("span",{onClick:g},"\u5220\u9664")),b.a.createElement("img",{onClick:function(){return f("edit")},src:"/lsc_h5/imgs/edit.png",alt:""}),b.a.createElement(x.b,{to:"/museums/collection_edit/"+r+"/"+u+"/"+o},b.a.createElement("img",{src:"/lsc_h5/imgs/add1.png",alt:""}))))}},{key:"componentDidMount",value:function(){this.getInit()}},{key:"shouldComponentUpdate",value:function(e,t,a){return!0}},{key:"componentWillReceiveProps",value:function(e,t){e.match.params.by!==this.props.match.params.by&&this.getInit()}}]),a}(b.a.Component);t.default=Object(j.b)((function(e){var t=e.commonReducer,a=t.formFields,n=t.page,c=t.museumHomeNavs,s=e.museumReducer,u=s.collectionList,o=s.museum;return{collectionList:u,formFields:a,page:n,museumHomeNavs:[{text:"\u5168\u90e8",value:-1}].concat(Object(r.a)(c)),museum:o}}),(function(e){var t=v.e.getCollections,a=v.e.getMuseumDetail,r=v.e.changeMuseumData,c=v.e.getMuseumSubTypeDetail,s=v.e.deleteCollection,u=v.a.changeCommonData;return Object(n.a)(Object(n.a)({},Object(y.bindActionCreators)({getCollections:t,changeCommonData:u,getMuseumDetail:a,changeMuseumData:r,getMuseumSubTypeDetail:c,deleteCollection:s},e)),{},{dispatch:e})}))(D)}}]);
//# sourceMappingURL=18.1a104161.chunk.js.map
