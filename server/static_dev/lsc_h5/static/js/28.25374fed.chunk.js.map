{"version":3,"sources":["pages/museums/set_cash/index.tsx"],"names":["SetCash","props","onSet","a","setMuseumCash","history","formFields","proportion","paymentAmount","id","match","params","show","isOk","goBack","state","this","className","direction","Item","name","placeholder","onClick","document","title","nextProps","nextState","nextContext","React","Component","connect","museum","museumReducer","commonReducer","dispatch","museumActions","bindActionCreators"],"mappings":"4VAqBMA,E,keAEF,WAAYC,GAAa,IAAD,8BACpB,cAAMA,IAwCVC,MAzCwB,sBAyChB,0CAAAC,EAAA,2DAC6F,EAAKF,MAA/FG,EADH,EACGA,cAAeC,EADlB,EACkBA,QADlB,IAC2BC,WAAaC,EADxC,EACwCA,WAAYC,EADpD,EACoDA,cAAiCC,EADrF,EACoEC,MAAQC,OAASF,GACpFD,IAAiBD,EAFlB,uBAGA,IAAMK,KAAK,8CAHX,0CAMiBR,EAAc,CAACK,KAAIF,aAAYC,kBANhD,kBAMGK,MAEHR,EAAQS,SARR,2CAtCJ,EAAKC,MAAQ,GAHO,E,qDAahBC,KALAf,MACIgB,UAHgK,YAOpKD,KAFAD,OALoK,IAMpKb,EACAc,KADAd,MAEJ,OACI,uBAAMgB,UAAW,SAAUD,UAAS,iBAChC,yBAAKA,UAAW,QACZ,kBAAC,IAAD,KACI,yBAAKA,UAAW,SAAhB,8CACA,sBAAME,KAAN,KACI,kBAAC,IAAD,CAAWC,KAAM,gBAAiBC,YAAY,iDAGtD,yBAAKJ,UAAW,aAAhB,mQAEJ,yBAAKA,UAAW,QACZ,kBAAC,IAAD,KACI,yBAAKA,UAAW,SAAhB,2CACA,sBAAME,KAAN,KACI,kBAAC,IAAD,CAAWC,KAAM,aAAcC,YAAY,YAGnD,yBAAKJ,UAAW,aAAhB,qkBAIJ,yBAAKA,UAAW,SAAUK,QAASpB,GAAnC,mB,0CAkBRqB,SAASC,MAAQ,6B,4CAGCC,EAA0BC,EAA0BC,GACtE,OAAO,M,GA5DOC,IAAMC,WAkFbC,uBAjBf,SAAyBf,GAGrB,MAAO,CACHgB,OAHahB,EAAMiB,cAAhBD,OAIHzB,WAHiBS,EAAMkB,cAApB3B,eAOX,SAA4B4B,GAAgB,IACjC9B,EAAiB+B,IAAjB/B,cACP,OAAO,2BACAgC,6BAAmB,CAAChC,iBAAgB8B,IAD3C,IAEIA,eAIOJ,CAGb9B","file":"static/js/28.25374fed.chunk.js","sourcesContent":["import React from 'react'\r\nimport {AllowRight, VsonField} from 'components'\r\nimport {Flex, Toast} from 'antd-mobile'\r\nimport './index.scss'\r\nimport {entries} from \"reducer\";\r\nimport {museumActions} from \"action\";\r\nimport {bindActionCreators} from \"redux\";\r\nimport {connect} from \"react-redux\";\r\n\r\ninterface P {\r\n    className?: string,\r\n    setMuseumCash: any,\r\n    museum: any,\r\n    match: any,\r\n    history: any,\r\n    formFields: any\r\n}\r\n\r\ninterface S {\r\n}\r\n\r\nclass SetCash extends React.Component<P, S> {\r\n    // 构造\r\n    constructor(props: any) {\r\n        super(props);\r\n        // 初始状态\r\n        this.state = {};\r\n    }\r\n\r\n    render(): React.ReactElement<any, string | React.JSXElementConstructor<any>> | string | number | {} | React.ReactNodeArray | React.ReactPortal | boolean | null | undefined {\r\n        const {\r\n            props: {\r\n                className = ''\r\n            },\r\n            state: {},\r\n            onSet\r\n        } = this\r\n        return (\r\n            <Flex direction={\"column\"} className={`set_cash_page`}>\r\n                <div className={'item'}>\r\n                    <AllowRight>\r\n                        <div className={'label'}>浏览展馆需缴费</div>\r\n                        <Flex.Item>\r\n                            <VsonField name={'paymentAmount'} placeholder='请输入缴费金额' />\r\n                        </Flex.Item>\r\n                    </AllowRight>\r\n                    <div className={'tips bd_u'}>设置是否需要付费展览你的展馆，如果设置为0，则表示免费浏览，不需付费，默认为0，免费浏览</div>\r\n                </div>\r\n                <div className={'item'}>\r\n                    <AllowRight>\r\n                        <div className={'label'}>转发分成比例(%)</div>\r\n                        <Flex.Item>\r\n                            <VsonField name={'proportion'} placeholder='1-100' />\r\n                        </Flex.Item>\r\n                    </AllowRight>\r\n                    <div className={'tips bd_u'}>转发分成比例是指：在你设置需要付费浏览你的展馆的前提下，其他用户帮你转发你的展馆，在他的转发引导下有新的用户进入你的展馆产生收益时，\r\n                        你需要按照你设置的分成比例分红给该转发用户，设置区间1-100之间。\r\n                    </div>\r\n                </div>\r\n                <div className={'state7'} onClick={onSet}>设置</div>\r\n            </Flex>\r\n        );\r\n    }\r\n\r\n    onSet = async () => {\r\n        const {setMuseumCash, history, formFields: {proportion, paymentAmount}, match: {params: {id}}} = this.props\r\n        if (!paymentAmount || proportion) {\r\n            Toast.show('收费不能为空！')\r\n            return\r\n        }\r\n        const {isOk} = await setMuseumCash({id, proportion, paymentAmount})\r\n        if (isOk) {\r\n            history.goBack()\r\n        }\r\n    }\r\n\r\n    componentDidMount(): void {\r\n        document.title = '收费设置'\r\n    }\r\n\r\n    shouldComponentUpdate(nextProps: Readonly<any>, nextState: Readonly<any>, nextContext: any): boolean {\r\n        return true\r\n    }\r\n}\r\n\r\n\r\nfunction mapStateToProps(state: entries) {\r\n    const {museum} = state.museumReducer\r\n    const {formFields} = state.commonReducer\r\n    return {\r\n        museum,\r\n        formFields\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch: any) {\r\n    const {setMuseumCash} = museumActions\r\n    return {\r\n        ...bindActionCreators({setMuseumCash}, dispatch),\r\n        dispatch\r\n    };\r\n}\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(SetCash)\r\n"],"sourceRoot":""}